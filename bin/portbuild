#!/usr/bin/tclsh
# portbuild
package require darwinports

# globals
set invoice Portfile

# Standard procedures
proc print_usage args {
	global argv0
	puts "Usage: $argv0 \[invoice\]"
}

proc fatal args {
	global argv0
	puts stderr "$argv0: $args"
	exit
}

# Main
if {$argc > 1} {
	print_usage
} elseif {$argc == 1} {
	set invoice [lindex $argv 0]
}

darwinports::init

if [file isfile $invoice] {
	source $invoice
} else {
	fatal invoice file '$invoice' is not a file or does not exist
}
eval_depend portutil::targets
