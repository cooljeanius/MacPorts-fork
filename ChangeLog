#
#   $Id$
#
#   This is a log of major user-visible changes in each release
#


(unreleased):

    - New logic for variants overload that basically yields to listing only
      variant +universal on ports that redefine it (pguyot in 24100).

    - Implement brand new find command in Pextlib.
      See portfile.7 for documentation (eridius in r24079 and r24080).

    - Add per-user preferences in ~/.macports/user.conf. This will be used
      for submitter information.
      Simplify selection of ports.conf file:
        - ~/.portsrc is no longer supported.
        - Search order for ports.conf is now:
            - PORTSRC
            - ~/.macports/ports.conf
            - ${prefix}/etc/ports.conf
          Only the first file found will be parsed and used.
       (jberry r24071)

    - Improvements on livecheck: fixed a report bug, improved ruby group
      default behavior (pguyot in r24026 and r24018)
      
    - Remove xar from the build. xar doesn't build on panther due to
      a libxml2 lib too old for xar requirements. We'll find another
      way to deal with xar, perhaps by requiring users to install the
      xar port when they need its services. (jberry r24107:r24108)
      
    - Remove configure switch for building launchd support. (jberry r24107:r24108)
    
    - Remove compatibility upgrade for conf files from
      darwinports 1.1 to 1.2. (jberry r24106).

Release 1.4.1 (14-Apr-2007):

    - Add responsive, reasonably fast http mirrors to openbsd group
      (pipping in r23343).

    - Resolved ticket #11637: livecheck incorrectly assumed that
      master_sites was set. (pguyot in r23329).

    - Add xar 1.4 into the build of MacPorts base. xar is now installed
      into /opt/local/, which will conflict with anybody who has the xar
      port installed. (jberry in r23687).

    - Add -I${prefix}/include -L${prefix}/lib to the default configure
      flags (pguyot in r23246 and r23291).

    - New options for configure flags (C|CPP|CXX|LD)FLAGS and logic to
      handle that and backward compatibility (pguyot in r23098, r23125,
      r23238, r23248 and r23249).

    - "port sync" now updates svn repos too (eridius in r22784).

    - Default +universal variant for configure-based ports (pguyot in
      r22313).

    - Fixed use of master_site in livecheck, added support for
      code.google.com checks, made the up to date message info (instead of
      debug) and improved debugging output with livecheck (eridius in
      r23888, r23889, r23890, r23894; pguyot in 23660)

    - Fixed a bug where running port test would not install dependencies
      when required. (pguyot in r23700)

    - New ruby portgroup option to specify the name of the module for
      gem-based ports. (pguyot in 23659)

    - New fetch option to ignore the SSL certificate when fetching from
      a secure site (default is to not ignore it). (pguyot in r23242)

    - Bugfix #11720. Fixes for variants.conf functionality. (jberry in
      r23967)


Release 1.4 (26-March-2007):

    - New gnupg mirrors list and general cleanups to varios other lists (pipping in r22979 through r22982,
      r22999, r23000 & r23037).

    - Python 2.4 & Python 2.5 group code now offer a "python.include" variable (mww in r22914 & r22953).

    - Resolved ticket #7563: The Pextlib curl command now sends a user agent, set to
      "MacPorts libcurl/[libcurl version]" (eridius in r22771).

    - Resolved ticket #11417: No longer touch the dep map file when opening it for reading (eridius in r22769).

    - Archivemode now supports both tbz2 & tbz binary archives naming variations (jmpp in r22584).

    - Add new alias 'registry_active' for registry::active so portfiles can check if another port is
      installed and activated (eridius in r22304).

    - Built-in 'find' command now always expects an expression as its first argument (jkh in r22048).

    - with_docs variant of GNUStep PortGroup ports now installs the latex2html port by default (yves in r22014).

    - Add new 'touch' & 'ln' portfile writing commands, their usage being similar to their BSD equivalents,
      along with 'move' and 'copy' shorthands for TCL's "file rename/copy" calls (eridius in r22007).

    - Fix a dangerous bug in parsing filenames with spaces in the the 'delete' command, while reworking it
      to no longer be a plain 'system "rm -rf <path>"' call (eridius in r22007).

    - Checksum phase no longer deletes distfiles upon checksums mistmatch, eliminating "file not found"
      errors when a second run is attempted, thus making the need for a "port clean --dist" call more
      explicit before continuing (eridius in r21967).

    - Stating an empty key value in a Portfile now correctly clears it, as expected (eridius in r21950 & r21951).

    - Documentation updates to the ports.conf.5 and portfile.7 man pages (markd, jmpp and others I may
      be forgetting, sorry 'bout that, in r21998, referencing tickets #4905, #6880 & #10840).

    - /Applications/DarwinPorts --> /Applications/MacPorts migration in base for aqua ports
      (rhwood in r21852 and r21853, but other commits to this effect were also applied to trunk/dports)

    - New SourceForge mirrors redirector and a few fallback geographically distributed hardcoded ones
      to prevent disaster from happening, as suggested by Ross Turk (jkh in r21143 & jmpp in r21768).

    - GNUStep PortGroup improvements and full documentation in portgroup.7 (yves in r21764).

    - Xcode GroupCode improvements to ensure builds always take place inside the work dir (eridius in r21762).

    - New 'macports' mirrors list, with entries pointing to svn's /distfiles/<user> &
      /distfiles/general directories in our repo (eridius & jmpp in r21621).

    - Iterate in darwinports_fastload using glob instead of hardcoding the library names (eridius in r21585).

    - New Python 2.5 GroupCode (mww in r21451).

    - Set upgrade.target back to archive (from unarchive) (dluke in r21110).

    - rubyforge_gem fetch method for the Ruby PortGroup & livecheck support
      (pguyot in r20544 & r20834, respectively).

    - Resolved ticket #10843 (and probably #8229): initialize the portinfo array each time to improve
      'port deps' and 'port variats' output (jberry in r19992).

    - Resolved ticket #10766: improve error when no current port is available (jberry in r19665).

    - Resolved ticket #8723: better messages for port outdated (jberry in r19664).


Release 1.3.2 (9-Aug-2006):

    - Fixed a bug that prevented operation of port ed with some editors.
      The env wasn't being properly restored for the editor. (jberry)

    - Fixed a bug in the creation of the portf symlink. (jmpp)

    - Fixed a bug where port upgrade -uf fails because of the dirty upgrade
      code. (pguyot)

    - Port no longer warns when a shared distfile directory is emptied by a
      clean --dist or clean --all, it now prunes the directory instead. (pguyot)

    - Gem method of ruby portgroup now destroots from the worksrcdir, thus
      avoiding an unnecessary warning with -t. (pguyot)

    - Tell ld to look into /usr/local/lib when building port. This solves a
      problem occurring when a newer version of readline is installed in
      /usr/local. (pguyot)

    - Added gnustep portgroup support. (Bugzilla #8139) (yves)

    - Avoid sending Pragma: no cache when fetching files. (Bugzilla #8669)
      (josh_root, blb)

    - Changed Makefile logic to reconfigure/regenerate files when templates
      are modified. (pguyot)
    
    - Trace now forbids renaming files and directories as well as removing
      directories outside the sandbox. (pguyot)

    - Allow additional inserted libraries by keeping DYLD_INSERT_LIBRARIES
      variable. (pguyot)
      
    - Change some UI strings and documentation to read MacPorts, rather than
      DarwinPorts. The project is adopting the new name "MacPorts", and will
      be using the macports.org domain in the future.

Release 1.3.1 (31-Jul-2006):

    - Fixed a bug in livecheck sourceforge guess algorithm. (pguyot)

    - Fixed an incompatibility of darwintrace.c with MacOS X 10.3. Darwintrace.c
      now also compiles on Linux. (pguyot)

    - Fixed a bug introduced by a patch to the fetch code. Now, fetch target
      can really deal with patch files even if the main fetch method is CVS or
      SVN. (pguyot)

    - Fixed a bug, introduced in 1.3, that prevented -f selfupdate from forcing
      a build of the fetched sources. (jberry)
      
    - Fixed a bug, introduced in 1.3, that prevented -u uninstall from working.
      (jberry)

    - Fixed a bug in xcode portgroup. One variable used by the group conflicted
      with global variables in port base code. (pguyot)

    - Added a new test case for a cvs+remote patch file bug. (pguyot)
    
    - Added ruby gems support for ruby group. (rcavanaugh & pguyot)

    - Trace now forbids creation of directories outside the sandbox. (pguyot)
    
    - Additions to man page for port(1): (jberry)
       * new port options -F, -i, -x, -p
       * mention interactive and batch modes
       * document extensions to info command.
    
    - Archive mode is now disabled by default. (landonf)

    - The upgrade target now properly detects and uses a matching binary
      archive if found, an uninstall && install combination needed up till
      now to pick it up. (jmpp)
    
Release 1.3 (27-Jul-2006):

    - Fixed a bug where only the first word of configuration settings (in
      ports.conf) was processed. This bug affected the use of extra_env.
      (Bugzilla #9948) (pguyot)

    - Fixed a bug where environment variables governing proxy were not
      capitalized properly. (blb & jberry)

    - Fixed a bug where port outdated and port ugprade didn't work in direct
      mode. (Bugzilla 7719, 7721) (dluke & jberry)

    - Fixed several problems with iteration on ports. (jberry)
    
    - Fixed a bug where curl LDFLAGS weren't properly propagated. (landonf)
    
    - Fixed a bug where location update routine invoked when installing DP did
      not take the DESTDIR variable into account. (jmpp)

    - Fixed a bug where patchfiles specifications could not have suffixes to
      indicate the master site. (pguyot)
    
    - Fixed spelling in port(1) man page. (Bugzilla 8103) (pjenvey & jberry)
    
    - Fixed a typo and another problem in messages generated by port command.
      (Bugzilla 6706 & 6712) (deric & jmpp)
    
    - Fixed a typo in ports.conf. (matt & jmpp)
    
    - Fixed several problems with launchd support (Bugzilla 8372 & 10041)
      (jberry)

    - Fixed a bug preventing the use of libmd for checksums and added an
      informative compilation error if libcrypto and libmd cannot be found.
      (landonf)
    
    - Fixed a bug where thread2.6 Tcl library wasn't installed where DP is
      installed. (jmpp)

    - Fixed a bug in xcode PortGroup which prevented the use of a custom
      project path. (pguyot)
    
    - Fixed a bug in xcode PortGroup which made destroot to fail when there
      were spaces in the install path. (pguyot)

    - Fixed a bug in portfetch.tcl which failed to fetch patches when using
      CVS or SVN. (Bugzilla 5269) (yeled)
    
    - Added new command 'delete' for use in Portfiles instead of
      'file delete' and 'system "rm.."' (mww)

    - Added more information to porthier(7) about ${prefix}/var/db/dports.
      (olegb)
    
    - Updated Gnome, KDE and SourceForge mirror lists. (Bugzilla 8045, 9152)
      (rwhood, blb, olegb & pguyot)

    - Check earlier if there is no Portfile in a directory (especially when
      iterating). (jberry)

    - Split livecheck into distcheck and livecheck. Added two regular expression
      modes (one line, full file), set the default to check against freshmeat
      and defined the default for perl5 group. (pguyot)

    - Discover path to rsync at autoconf time. (jberry)
    
    - Mark CVS, TAR, GNUTAR, and RSYNC as additional precious variables that can
      be overridden in configure environment at time of configure to customize
      the location of these tools. Note that these tools are not found in the dp
      prefix, as PATH is sanitized of references to prefix. But you could
      override the precious variables to acheive that if you really want to
      shoot yourself. (jberry)

    - Set timeouts for curl transfers.  Some connections to sketchy mirror sites
      can hang forever otherwise. (jkh)
    
    - Shortened the time to upgrade with archive mode on by using archive as the
      target. (Bugzilla #7891) (dluke & jberry)

    - Added support for sqlite 3. (jberry)

    - Major update of the trace (-t) option (pguyot):
      * backported changes from darwinbuild's version of darwintrace, including
        several bug fixes.
      * cleaned up the code.
      * writing/creating and also unlinking a file outside allowed bounds are
        now blocked instead of being simply reported (previous version only
        reported creations).
      * fixed a bug where -t failed with X11 ports because ${prefix} got
        overwritten.

    - Added new native commands to handle privileges chores. (jberry)
    
    - Add batch/interactive mode. In interactive mode, use readline when it's available.
      Command and portname completion is available in interactive mode, as is readline
      history. (jberry) 2005-11-07,08
    
        * Add new option -F <filename> which specifies a command file to be
          read and processed. Multiple such options may be given to provide
          multiple command files. If filename is "-", then stdin is read.
      
        * Option -i is equivilant to -F -, which forces processing of standard
          input following any commands given as arguments.
          
        * If port is invoked as portf, an -F is assumed as an implicit first
          argument (so the real first argument is taken as a command file to
          be processed). This should allow the use of a shebang line such as:
            #!/usr/bin/env portf
            
        * Commands starting with # are treated as comments.
        
        * Install a symbolic link /opt/local/bin/portf --> /opt/local/bin/port.
        
        * New command "cd" is useful to change to a new directory/port while in
          interactive/batch mode.
          
        * Multiple commands on a single line may be separated by a ';'
        
        * Global command options may now be specified following a particular
          command; they will apply only to that command rather than to all
          command invocations. This is important for batch/interactive mode.
        
    - Add new option -p, which ignores errors while processing within a command.
      (this subsumes some of the work that -f was previously overloaded to do).
      (jberry).
    
    - Add new option -x, which exits immediately on errors while in batch mode (
      otherwise we don't exit on errors in batch mode). (jberry)
    
    - Refactoring of port(1) to cast actions into distinct action procs. Adds
      the new action_array which is used for action dispatch, and also to generate
      the list of possible commands for help and command completion. (jberry)
    
    - Initial version of portmirror binary to build a mirror of distfiles.
      (pguyot)

    - Improvements and fixes to the tests. (pguyot)
    
    - Added a new option (checksum.skip=yes) to bypass the checksum phase. This
      option is mostly useful on the command line to test older distfiles.
      (jberry)

    - Added dependencies for rpm on virtual packages representing releases of
      MacOS X. (mww)
      
    - Add to port the ability to query for specific meta-data fields.
      For instance: port info --maintainer --name category:java
      When specific fields are given, the legacy generalized info is not presented, and vis-versa.
      By default, the fields for each port are listed one-per-line, with a field label
      in front of each. (The field label is omitted if the global -q option is given).
      If the --line option is given, the fields are presented on one line, tab separated,
      and with no field label: port info --name --maintainer --line tomcat5 apache2
      Field names are those from the PortIndex, plus some convenience versions of
      those: (such as allowing category instead of categories).
      Fields which are actually lists (such as depends_lib) are displayed comma-separated.
      (jberry) 2006-02-16
      
Release 1.2.1 (10-Apr-2006):

    - Changes to darwinports build infrastructure to allow for build of
      the darwinports infrastructure as a multiarchitecture binary.
      This allows darwinports to be built as fat, but does nothing to
      allow ports themselves to be built as fat. To build darwinports
      fat, configure as follows:
        ./configure CFLAGS='-arch ppc -arch i386' SHLIB_LDFLAGS='-arch ppc -arch i386'
                                        backported from HEAD (jberry)
                                        
    - Add a hack in order attempt to detect when a sourceforge mirror
      is actually returning an error page. If this is detected, proceed
      to the next mirror.               backported from HEAD (jberry)

Release 1.2 (14-Dec-2005):

    - Syntax change to disambiguate uses of the port's version on the command
      line, when coupled with new changes to accept multiple ports.
      The port version must now always be prefixed with an @. Example:
        port uninstall vim @1.0
      This probably only affects uninstall and activate, both of which
      require a version if there are multiple versions installed.

    - gzip-compress manpages that are in the share/man/cat? directories during
      destroot, too. (mww)

    - Enhance port command such that targets that require a port to be
      specified will now all default to a port in current directory. (jberry)
      
    - Enhance port command to allow multiple ports per invocation.
      Where previously one said "port install porta; port install portb", 
      one can now say "port install porta portb". (jberry)
      
    - Enhance port command to allow use of shell-like glob patterns for
      port selection. When a glob pattern is found, the group of ports
      matching the glob pattern is substituted. (jberry)
      
    - Enhance port command to allow use of "pseudo" portnames to specify
      groups of ports.
      When one of these pseudo portnames is specified on the command line,
      the corresponding group of ports is substituted.

      Currently defined pseudo portnames are:
        current, all, installed, uninstalled, active, inactive, outdated.
      
      Additional pseudo portnames can be used to select ports based on a
      regex pattern match against certain criteria. Each port selector is
      a name, followed by a colon, followed by the desired regex pattern.
      The selectors are:
      variants:, variant:, description:, portdir:, homepage:, epoch:,
      platforms:, platform:, name:, long_description:, maintainers:, maintainer:,
      categories:, category:, version:, and revision: (jberry)
      
    - Enhance port command to allow use of set expressions to combine
      ports or groups of ports.
      Supported operators are "and", "or", "not", "!", "(", ")". (jberry)
      
    - Enhance port command to allow a port to be specified through a file:
      url instead of via portname. This function was previously available
      though the -D and -u options, which make less sense now that multiple
      ports can be specified to a target. (jberry)
      
    - Under Tiger, startupitems are now by default generated for launchd
      rather than systemstarter. (jberry)
      
    - Add new startupitem keys startupitem.executable, startupitem.logfile,
      startupitem.logevents, startupitem.pidfile, supported for both
      systemstarter and launchd. (jberry)
      
    - New Test framework. Running make test from base/tests/ will test
      several features of port(1) including syntax of Portfiles. New tests
      can easily be added by simply creating new directories in base/tests/
      with a Portfile and a master file containing the output of port test
      in this directory. Some tests are actually more complex. These tests
      require the port binary to be installed in ${prefix}. (pguyot)

    - svn fetching support, parallel to cvs fetching. Note that
      this is a bit skanky as svn is not installed on the platform by default.
      This code will error-out if svn is not installed. (jberry)

    - Removal of old "fetch.args" parameter now that all Portfiles have been
      properly moved to leverage Paul's libcurl work (yeled)

    - DP now sets its own env variables instead of filtering user declared
      ones considered harmful (blb)

    - "Canonicalization" of expanded path:${prefix}/foo:bar dependencies
      when including them in the PortIndex for better abstraction (jberry/pguyot)

    - Addition of the IndexRegen.sh script that takes care of the automated
      index thingie... (pguyot and jmpp)

    - Miscellaneous cleanups:
        - DP base is assured to respect a temporary DESTDIR installation and
          other Makefile cleanups (toby, jmpp)
        - s/--with-tclpackagedir/--with-tclpackage/g in autoconf error
          reports (pguyot)
        - fixes for the buildall.sh script (jkh)

    - Some other fixes for lurking bugs, untapped by the various developments
      that have taken place since 1.1 ("bunch of developers ;-);

    - Snazzy new ChangeLog file
    
    - Add new actions for port(1): help (get help about port),
      echo (the expanded arguments),
      cat (the contents of the Portfiles from the specified ports),
      edit (also alias "ed", the contents of the Portfiles, using EDITOR or VISUAL),
      dir (emit path to the port's directory),
      file (emit path to the port's Portfile)
      (jberry)
      
    - On make install, upgrade ports.conf and sources.conf to change rsync.opendarwin.org
      to rsync.darwinports.org. This is now our preferred rsync hostname.
      Likewise, rename the rsync destination directories in ${prefix}/var/db/dports/sources
      in a similar fashion (jberry)


Release 1.1:

    (information not here).
    
Release 1.0:
    
    (information not here).
